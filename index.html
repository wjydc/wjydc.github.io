<!DOCTYPE html>


<html lang="en">


<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     薇娇
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/dist/main.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">
  <link rel="stylesheet" href="/css/custom.css">
  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

  

</head>

</html>

<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">薇娇</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-nginx解决跨域"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/02/03/nginx解决跨域/"
    >nginx解决跨域</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/02/03/nginx解决跨域/" class="article-date">
  <time datetime="2021-02-03T03:05:33.000Z" itemprop="datePublished">2021-02-03</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
   
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-静态购物车"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/02/03/静态购物车/"
    >静态购物车</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/02/03/静态购物车/" class="article-date">
  <time datetime="2021-02-03T02:36:29.000Z" itemprop="datePublished">2021-02-03</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="静态购物车"><a href="#静态购物车" class="headerlink" title="静态购物车"></a>静态购物车</h1><p>// 购物车 数量增减<br>// numEle-存放数量的元素 input可手动输入，此处判断了 存放元素的标签类型 ##</p>
<h2 id="js封装"><a href="#js封装" class="headerlink" title="js封装"></a>js封装</h2><pre><code>var ShoppingCart = function (opt) {
    var _default = {
        addEle: null,  // 数量加按钮
        reduceEle: null,   // 数量减按钮,
        numEle: null,      // 存放数量的元素
        maxNum: null        //  最大值
    }
    this._opation = $.extend({}, _default, opt)
    this.initnum = 1;
    this.init()
}
ShoppingCart.prototype = {
    init: function () {
        let $this = this
        var tagType = this._opation.numEle[0].tagName.toLowerCase();
        vals($this.initnum)  // 默认 1
        var currentNum;
        this._opation.addEle.click(function () {

            currentNum = tagType == &apos;input&apos; ? $this._opation.numEle.val() - 0 : $this._opation.numEle.html() - 0;
            currentNum += 1;
            if ($this._opation.maxNum != null &amp;&amp; currentNum &gt; Number($this._opation.maxNum)) {
                currentNum = Number($this._opation.maxNum);
            }
            vals(currentNum)
        })
        this._opation.reduceEle.click(function () {
            currentNum = tagType == &apos;input&apos; ? $this._opation.numEle.val() - 0 : $this._opation.numEle.html() - 0;
            currentNum -= 1;
            if (currentNum &lt;= 0) {
                currentNum = 1;
            }
            vals(currentNum)
        })
        // 手动输入数值判断 是否合法 不合法则让其等于最大值
        this._opation.numEle.keyup(function () {
            currentNum = $this._opation.numEle.val() - 0;
            if ($this._opation.maxNum != null &amp;&amp; currentNum &gt; Number($this._opation.maxNum)) {
                currentNum = Number($this._opation.maxNum);
            }
            vals(currentNum)
        })
        function vals(num) {
            if (tagType == &apos;input&apos;) {
                $this._opation.numEle.val(num);
            } else {
                $this._opation.numEle.html(num);
            }
        }

    }
}
</code></pre><h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><pre><code>var g = new ShoppingCart({
    addEle: $(&apos;.add&apos;), // 数量加按钮
    reduceEle: $(&apos;.reduce&apos;), // 数量减按钮,
    numEle: $(&apos;.inputCard&apos;), // 存放数量的元素
    maxNum: 20 //  最大值
})
</code></pre> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-无缝滚动"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/02/02/无缝滚动/"
    >无缝滚动</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/02/02/无缝滚动/" class="article-date">
  <time datetime="2021-02-02T06:14:11.000Z" itemprop="datePublished">2021-02-02</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="文字无缝滚动"><a href="#文字无缝滚动" class="headerlink" title="文字无缝滚动"></a>文字无缝滚动</h1><h2 id="html"><a href="#html" class="headerlink" title="html"></a>html</h2><pre><code> &lt;div id=&quot;scrollContent&quot;&gt;
    &lt;div class=&quot;scrollContentTranslate&quot;&gt;
        &lt;p id=&quot;scroll1&quot;&gt;内容纯属娱乐，暂不向未满18岁青少年提供服务。严格按照法律法规和用户协议对您的信息进行全方位的保护，请放心使用。&lt;span&gt;&lt;/span&gt; &lt;/p&gt;
        &lt;p id=&quot;scroll2&quot;&gt;&lt;/p&gt;
    &lt;/div&gt;
 &lt;/div&gt;
&lt;script&gt; 
  indexScroll.init() 
&lt;/script&gt;
</code></pre><h2 id="css"><a href="#css" class="headerlink" title="css"></a>css</h2><pre><code>#scrollContent {
    width: 93%;
    margin: 0 auto 2.5rem;
    padding-left: .4rem;
    overflow: hidden;

    .scrollContentTranslate {
        float: left;
        width: auto;
        min-width: 8000%;
    }

    #scroll1,
    #scroll2 {
        float: left;
        font-size: .32rem;
        color: #fff;
        white-space: nowrap;

        span {
            display: inline-block;
            width: 3.67rem;
        }
    }
}
</code></pre><h2 id="js"><a href="#js" class="headerlink" title="js"></a>js</h2><pre><code>var indexScroll = {
    init: function () {
        var speed = 50; //数字越大速度越慢
        var tab = document.getElementById(&quot;scrollContent&quot;);
        var tab1 = document.getElementById(&quot;scroll1&quot;);
        var tab2 = document.getElementById(&quot;scroll2&quot;);
        tab2.innerHTML = tab1.innerHTML;
        function Marquee() {
            if (tab2.offsetWidth - tab.scrollLeft &lt;= 0)
                tab.scrollLeft -= tab1.offsetWidth
            else {
                tab.scrollLeft++;
            }
        }
        setInterval(Marquee, speed);
    }
}
</code></pre> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-音频播放控件"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/02/01/音频播放控件/"
    >音频播放控件</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/02/01/音频播放控件/" class="article-date">
  <time datetime="2021-02-01T09:26:35.000Z" itemprop="datePublished">2021-02-01</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="页面audio-html"><a href="#页面audio-html" class="headerlink" title="页面audio.html"></a>页面audio.html</h3><p>  html:</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;script src=&quot;../js/jquery.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;../js/flexible.debug.js&quot;&gt;&lt;/script&gt;
    &lt;meta name=viewport content=&quot;width=device-width,initial-scale=1,user-scalable=no&quot;&gt;
    &lt;title&gt;济公全传-奇文小说&lt;/title&gt;
    &lt;!-- 播放器样式 --&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;../css/audio.css&quot;&gt;
    &lt;!-- 页面样式，按设计稿 --&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;../css/style.css&quot;&gt;


&lt;/head&gt;

&lt;body&gt;
    &lt;!-- 磨砂背景 --&gt;
    &lt;!-- &lt;div class=&quot;blur&quot;&gt;
            &lt;img src=&quot;../../Image/2.jpg&quot; alt=&quot;&quot;&gt;
        &lt;/div&gt; --&gt;
    &lt;!--fixLayer  --&gt;
    &lt;div class=&quot;audiosWrap fixLayer&quot;&gt;
        &lt;div class=&quot;header wHeadBg pageHead&quot;&gt;
            &lt;div class=&quot;head-left&quot;&gt;&lt;a class=&quot;back&quot; href=&quot;#&quot;&gt;&lt;img src=&quot;../img/back.png&quot; alt=&quot;&quot;&gt;&lt;/a&gt;&lt;/div&gt;
            &lt;!-- &lt;div class=&quot;head-left&quot;&gt;&lt;a class=&quot;back&quot; href=&quot;#&quot;&gt;&lt;img src=&quot;../img/backW.png&quot; alt=&quot;&quot;&gt;&lt;/a&gt;&lt;/div&gt; --&gt;
            &lt;div class=&quot;head-middle&quot;&gt;
                &lt;p&gt;尤物小妻潜上瘾&lt;/p&gt;
            &lt;/div&gt;
            &lt;!-- &lt;div class=&quot;head-right&quot;&gt;
                &lt;p class=&quot;headRightBox&quot;&gt;
                    &lt;a class=&quot;menu&quot; href=&quot;javascript:;&quot;&gt;&lt;/a&gt;
                &lt;/p&gt;
            &lt;/div&gt; --&gt;
        &lt;/div&gt;
        &lt;!-- 标题 --&gt;
        &lt;div class=&quot;cdText&quot;&gt;
            &lt;p&gt;尤物小妻潜上瘾&lt;/p&gt;
        &lt;/div&gt;
        &lt;!-- 封面 --&gt;
        &lt;div class=&quot;cdBox&quot;&gt;
            &lt;div class=&quot;coverBox&quot;&gt;
                &lt;img class=&quot;coverImage&quot; src=&quot;../img/1.jpg&quot;&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- 播放器控制面板 --&gt;
        &lt;div class=&quot;controlBox&quot;&gt;
            &lt;div id=&quot;playContent&quot;&gt;

                &lt;div onclick=&quot;myControl.selectTime(event)&quot; id=&quot;progressWrap&quot;&gt;
                    &lt;div id=&quot;progress&quot; style=&quot;display: block;&quot;&gt;&lt;/div&gt;
                    &lt;div class=&quot;timeBox&quot;&gt;
                        &lt;span id=&quot;currentTime&quot;&gt;00:00&lt;/span&gt;
                        &lt;span id=&quot;totleTime&quot;&gt;12:30&lt;/span&gt;
                    &lt;/div&gt;
                &lt;/div&gt;

            &lt;/div&gt;

            &lt;ul&gt;
                &lt;li class=&quot;small&quot;&gt;
                    &lt;a id=&quot;prevButton&quot; class=&quot;prev gray&quot;
                        href=&quot;./listening.html?url=http://file.huaxiazi.com/mp3/%E6%B5%8E%E5%85%AC%E5%85%A8%E4%BC%A0/jgqz002.mp3&quot;&gt;&lt;/a&gt;
                &lt;/li&gt;
                &lt;li class=&quot;playbg&quot;&gt;
                    &lt;a id=&quot;playButton&quot; onclick=&quot;myControl.mainControl()&quot; class=&quot;play&quot;&gt;&lt;/a&gt;
                &lt;/li&gt;
                &lt;li class=&quot;small&quot;&gt;
                    &lt;a id=&quot;nextButton&quot; class=&quot;next&quot;
                        href=&quot;http://file.huaxiazi.com/mp3/%E6%B5%8E%E5%85%AC%E5%85%A8%E4%BC%A0/jgqz003.mp3&quot;&gt;&lt;/a&gt;
                &lt;/li&gt;
            &lt;/ul&gt;

            &lt;ol&gt;
                &lt;li class=&quot;collect noCollected&quot;&gt;
                    &lt;a href=&quot;javascript:;&quot;&gt;&lt;i&gt;&lt;/i&gt;&lt;span&gt;收藏&lt;/span&gt;&lt;/a&gt;
                &lt;/li&gt;
                &lt;li id=&quot;playSpeed&quot; class=&quot;speed&quot;&gt;
                    &lt;a href=&quot;javascript:;&quot;&gt;&lt;i&gt;&lt;/i&gt;&lt;span&gt;1倍数&lt;/span&gt;&lt;/a&gt;
                &lt;/li&gt;
                &lt;li class=&quot;directory&quot;&gt;
                    &lt;a
                        href=&quot;../../HTML/page/listening-moreList.html?url=http://file.huaxiazi.com/mp3/%E6%B5%8E%E5%85%AC%E5%85%A8%E4%BC%A0/jgqz003.mp3&quot;&gt;&lt;i&gt;&lt;/i&gt;&lt;span&gt;目录&lt;/span&gt;&lt;/a&gt;
                &lt;/li&gt;
            &lt;/ol&gt;

            &lt;audio id=&quot;myMusic&quot;&gt;
                &lt;!-- &lt;source src=&quot;http://file.huaxiazi.com/mp3/%E6%B5%8E%E5%85%AC%E5%85%A8%E4%BC%A0/jgqz001.mp3&quot; type=&quot;audio/ogg&quot;&gt;
                &lt;source src=&quot;http://file.huaxiazi.com/mp3/%E6%B5%8E%E5%85%AC%E5%85%A8%E4%BC%A0/jgqz001.mp3&quot; type=&quot;audio/mpeg&quot;&gt;
            --&gt;
            &lt;/audio&gt;
        &lt;/div&gt;

    &lt;/div&gt;

    &lt;!-- 固定悬浮窗 --&gt;
    &lt;div class=&quot;fixAudio&quot;&gt;
        &lt;p&gt;5&lt;/p&gt;&lt;img src=&quot;../../Image/1.jpg&quot; alt=&quot;&quot;&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;!-- 
    音频
 --&gt;
&lt;script src=&quot;../js/jquery.cookie.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;../js/audiospage.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;../js/audios.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
    // 自动播放
    var myControl = new Control({
        currentSrc: &apos;http://file.huaxiazi.com/mp3/%E6%B5%8E%E5%85%AC%E5%85%A8%E4%BC%A0/jgqz001.mp3&apos;,
        callback: function() {
            console.log(&apos;执行事件&apos;)
        }
    })
    myControl.initAutoPlay()

    // 点击播放
    // $(&apos;#test&apos;).click(function(){
    //     myControl.mainControl()
    // })
&lt;/script&gt;

&lt;/html&gt;
</code></pre><h3 id="audio-js"><a href="#audio-js" class="headerlink" title="audio.js"></a>audio.js</h3><p>  js</p>
<pre><code>//播放器控制面板    
var Control = function (o) {
    let that = this
    var setting = {
        audio: $(&quot;#myMusic&quot;)[0], //播放器
        progressWrap: $(&quot;#progressWrap&quot;), //歌曲进度条容器
        progress: $(&quot;#progress&quot;),     //歌曲进度条
        playBtn: $(&quot;#playButton&quot;),   //主控按钮
        allTimeNode: $(&quot;#totleTime&quot;),    //总时间容器
        currentTimeNode: $(&quot;#currentTime&quot;),   //当前时间容器
    }
    this._opation = $.extend({}, setting, o);

    this.audio = this._opation.audio;
    this.progressWrap = this._opation.progressWrap;
    this.progress = this._opation.progress;
    this.playBtn = this._opation.playBtn;
    this.allTimeNode = this._opation.allTimeNode;
    this.currentTimeNode = this._opation.currentTimeNode;

    this.init();
}

Control.prototype = {
    // 默认设置
    init: function () {
        let that = this
        //播放控制    
        this.start = true;
        //定时器
        this.timer = null;

        // 设置播放地址
        this.audio.src = this._opation.currentSrc;
        // 进入页面播放速率
        this.setPlaySpeed();
        // 进入页面开始播放地址以及时间点
        this.pagePlay();
        // 每隔2s记录一次播放地址时间
        setInterval(function () {
            that.setCookieSong()
        }, 2000);

        if (this._opation.callback &amp;&amp; typeof that._opation.callback == &quot;function&quot;) {
            this._opation.callback()
        }


    },
    // 微信端自动播放
    initAutoPlay: function () {
        let that = this;
        document.addEventListener(&apos;DOMContentLoaded&apos;, function () {
            that.goPlayStyle();
            function audioAutoPlay() {
                that.audio.play()
                document.addEventListener(&quot;WeixinJSBridgeReady&quot;, function () {
                    // 可用数据足以开始播放 if(that.audio.readyState &gt;=4){ alert(&apos;readyState=&apos; + readyState) }
                    that.audio.play()
                }, false);

                that.timer = setInterval(
                    function () {
                        that.oTime()
                    }, 1000)
                that.start = false;
                that.autoNext();
            }
            audioAutoPlay();
        });
    },

    //转换为时间格式
    timeDispose: function (number) {
        var minute = parseInt(number / 60);
        var second = parseInt(number % 60);
        minute = minute &gt;= 10 ? minute : &quot;0&quot; + minute;
        second = second &gt;= 10 ? second : &quot;0&quot; + second;
        return minute + &quot;:&quot; + second;
    },

    //播放时间
    oTime: function () {
        // if(this.audio.readyState &gt;=4){  }  // 可用数据足以开始播放
        var currentProgress = Math.round(this.audio.currentTime / this.audio.duration * parseInt(this.progressWrap.css(&quot;width&quot;)));
        this.progress.css(&quot;width&quot;, currentProgress + &quot;px&quot;);
        this.allTimeNode.html(this.timeDispose(this.audio.duration));
        this.currentTimeNode.html(this.timeDispose(this.audio.currentTime));
    },

    //播放进度选择
    selectTime: function (event) {
        var moveTo = event.pageX - this.progressWrap.offset().left;
        this.audio.currentTime = moveTo / parseInt(this.progressWrap.css(&quot;width&quot;)) * this.audio.duration;
        this.progress.css(&quot;width&quot;, moveTo + &quot;px&quot;);
        this.currentTimeNode.html(this.timeDispose(this.audio.currentTime));
    },
    // 主控
    mainControl: function () {
        function pp(a) {
            if (a.start) {
                a.goPlay();
            } else {
                a.goPause();
            }
        }
        setTimeout(pp(this), 500);
    },
    // 监听播放完毕后 自动播放下一曲
    autoNext: function () {
        let that = this
        this.audio.addEventListener(&apos;waiting&apos;, function () {
            that.allTimeNode.html(&apos;加载中...&apos;);
        }, false);

        this.audio.addEventListener(&apos;ended&apos;, function () {
            console.log(&apos;自动下一曲&apos;)
            that.restTime()
            that.goPause()
            var nextUrl = $(&quot;#nextButton&quot;).attr(&quot;href&quot;);
            console.log(nextUrl)
            that.audio.src= nextUrl;
            that.goPlay();
        }, false);
    },
    restTime: function () {
        let that = this;
        let ua = window.navigator.userAgent.toLowerCase();
        if (ua.match(/MicroMessenger/i) == &apos;micromessenger&apos;) {
            that.audio.addEventListener(&apos;canplay&apos;, function () {
                that.audio.currentTime = 0;
            }, false);
        } else {
            that.audio.currentTime = 0;
        }
        $.cookie(&apos;songTime&apos;, 0, { path: &apos;/&apos; });
    },
    // 每隔2s记录 当前播放地址,时间
    setCookieSong: function () {
        var mediaUrl = this.audio.currentSrc;
        var mediaTime = this.audio.currentTime;
        $.cookie(&apos;mediaUrl&apos;, mediaUrl, { path: &apos;/&apos; });
        $.cookie(&apos;mediaTime&apos;, mediaTime, { path: &apos;/&apos; });
    },
    // 切换页面 接着播放
    pagePlay: function () {
        let that = this;
        var mediaUrlPage = $.cookie(&apos;mediaUrl&apos;);
        var mediaTimePage = $.cookie(&apos;mediaTime&apos;);
        if (mediaTimePage &amp;&amp; mediaTimePage != that.audio.duration) {
            mediaTimePage = parseFloat(mediaTimePage)
        } else {
            mediaTimePage = 0;
        }
        console.log(&apos;mediaTime=&apos; + mediaTimePage)
        console.log(&apos;mediaUrl=&apos; + mediaUrlPage);
        if (mediaUrlPage) {
            this.audio.currentSrc = mediaUrlPage;
            let ua = window.navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == &apos;micromessenger&apos;) {
                that.audio.addEventListener(&apos;canplay&apos;, function () {
                    that.audio.currentTime = mediaTimePage;
                }, false);
            } else {
                that.audio.currentTime = mediaTimePage;
            }
        }
    },
    // 倍数播放1.0  1.5 2.0
    setPlaySpeed: function () {
        let that = this;
        var speed = $.cookie(&apos;playSpeed&apos;);
        speed = speed ? parseFloat(speed) : 1;
        console.log(speed)
        this.audio.playbackRate = speed;
        that.speedStyle($(&apos;#playSpeed&apos;), speed);
        // 修改  1-speed10 1.5-speed15  2-speed20
        $(&apos;#playSpeed&apos;).click(function () {
            let $this = $(this)
            $(this).removeAttr(&apos;class&apos;)
            speed += 0.5;
            if (speed &gt; 2) { speed = 1; }
            that.speedStyle($this, speed);
            that.audio.playbackRate = speed;
            $.cookie(&apos;playSpeed&apos;, speed, { path: &apos;/&apos; });
        })
    },
    // 倍数播放控制按钮
    speedStyle: function ($this, spd) {
        $this.find(&apos;span&apos;).text(spd + &apos;倍数&apos;)
        $this.removeAttr(&apos;class&apos;).attr(&apos;class&apos;, &apos;speed&apos; + spd * 10)
    },


    //播放
    goPlay: function () {
        this.audio.play();
        var _this = this;
        this.goPlayStyle();
        this.timer = setInterval(function () { _this.oTime() }, 1000)
        this.start = false;
        this.autoNext();
        thisTime = new Date();
        starttime = thisTime.getFullYear() + &quot;&quot; + (thisTime.getMonth() &gt; 8 ? &apos;&apos; : &apos;0&apos;) + (thisTime.getMonth() + 1) + &quot;&quot; + (thisTime.getDate() &gt; 9 ? &apos;&apos; : &apos;0&apos;) + thisTime.getDate() + (thisTime.getHours() &gt; 9 ? &apos;&apos; : &apos;0&apos;) + thisTime.getHours() + (thisTime.getMinutes() &gt; 9 ? &apos;&apos; : &apos;0&apos;) + thisTime.getMinutes() + (thisTime.getSeconds() &gt; 9 ? &apos;&apos; : &apos;0&apos;) + thisTime.getSeconds();

    },

    //暂停
    goPause: function () {
        this.audio.pause();
        this.goPauseStyle();
        clearInterval(this.timer);
        this.start = true;
    },

    //播放样式
    goPlayStyle: function () {
        this.playBtn.addClass(&quot;pause&quot;);
        this.playBtn.removeClass(&quot;play&quot;);
        $(&quot;#progress&quot;).show();

    },

    //暂停样式
    goPauseStyle: function () {
        this.playBtn.addClass(&quot;play&quot;);
        this.playBtn.removeClass(&quot;pause&quot;);
    },

}
</code></pre><h3 id="页面样式-style-css"><a href="#页面样式-style-css" class="headerlink" title="页面样式 style.css"></a>页面样式 style.css</h3><p>  css</p>
<pre><code>/* 页面样式 */
html,
body {
    height: auto;
    min-height: 100vh;
    position: relative;
}

/* 头部样式 */
.header {
    width: 100%;
    height: 1.2rem;
    overflow: hidden;
    position: relative;
    /* position: fixed; */
    /* position: absolute;
    top: 0;
    left: 0;
    z-index: 500; */
}

.header .head-left {
    height: 1.2rem;
    position: absolute;
    top: 0;
    left: 0.47rem;
    z-index: 8;
}

.header .head-left a {
    display: block;
    height: 100%;
    overflow: hidden;
    cursor: pointer;
}

.header .head-middle {
    width: 100%;
    height: 1.2rem;
}

.header .head-right {
    height: 1.2rem;
    position: absolute;
    top: 0;
    right: 0.47rem;
    z-index: 8;
}

.header .head-right .headRightBox {
    width: auto;
    height: 1.2rem;
}

.header .head-right .headRightBox a {
    height: 100%;
    overflow: hidden;
    text-align: right;
    padding-right: 0.03rem;
    display: block;
    float: left;
    font-size: 0;
}

.header .head-right .headRightBox a img {
    display: block;
    width: 0.48rem;
    height: 0.48rem;
    margin: auto;
}

.pageHead .head-left a {
    text-align: left;
    padding-top: 0.39rem;
    font-size: 0;
}

.pageHead .head-left a img {
    height: 0.43rem;
}

.pageHead .head-middle {
    padding: 0 1.53rem 0;
}

.pageHead .head-middle p {
    text-align: center;
    font-size: 0.48rem;
    line-height: 1.2rem;
    height: 1.2rem;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-weight: bold;
}

.pageHead .head-middle p i {
    font-size: 0.4rem;
    color: #BFBDB8;
}

.pageHead .head-right .headRightBox a {
    width: 0.8rem;
    background: url(&apos;../img/menu.png&apos;) no-repeat center;
    background-size: 0.48rem 0.48rem;
}

.wHeadBg {
    background-color: #fff;
    /* 白色底 */
    box-shadow: 0 0 .2rem #e8ecf0;
    -moz-box-shadow: 0 0 .2rem #e8ecf0;
    -webkit-box-shadow: 0 0 .2rem #e8ecf0;
    color: #221802;
}

.nHeadBg {
    background-color: transparent;
    color: #FFF;
    border-bottom: 1px solid #fff;
    /* 透明底 */
}



.fixAudio {
    width: 2rem;
    height: 1.8rem;
    position: fixed;
    right: 0.27rem;
    bottom: 3.2rem;
    z-index: 500;
  }
  .fixAudio p {
    display: block;
    width: 0.8rem;
    height: 0.8rem;
    font-size: 0.38rem;
    color: #fff;
    position: absolute;
    right: 0;
    top: 0;
    border-radius: 50%;
    border: 2px solid #fff;
    z-index: 10;
    text-align: center;
    line-height: calc(0.8rem - 4px);
    background-color: red;
    /* 不支持线性的时候显示 */
    background-image: linear-gradient(#ee9c9c, #df7979, #F53F3F);
    box-shadow: 0 0 0.13rem #8c8c8f;
    -moz-box-shadow: 0 0 0.13rem #8c8c8f;
    -webkit-box-shadow: 0 0 0.13rem #8c8c8f;
  }
  .fixAudio img {
    width: 1.6rem;
    height: 1.6rem;
    position: absolute;
    left: 0.25rem;
    top: 0.1rem;
    border-radius: 50%;
    border: 2px solid #fff;
    box-shadow: 0 0 0.13rem #8c8c8f;
    -moz-box-shadow: 0 0 0.13rem #8c8c8f;
    -webkit-box-shadow: 0 0 0.13rem #8c8c8f;
  }


/* ---------------------------------------------------------------- */

/* 磨砂背景 */
.blur {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
}
.blur img {
    width: 100%;
    height: 100%;
    -webkit-filter: blur(20px);
    -moz-filter: blur(20px);
    -ms-filter: blur(20px);
    filter: blur(20px);
    position: absolute;
}
.blur::after{
    content:&apos;&apos;;
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    overflow: hidden;
    background-color: #000;
    opacity: 0.3;
    z-index: 2;
}

/* --------------------------- 正文样式   ------------------------------------ */

.audiosWrap {
    width: 100%;
    height: auto;
    min-height: 100vh;
    background-color: #fff;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 10;
}
.fixLayer{
    position: fixed;
    z-index: 100000;
    top: 100vh;
}

.slideOut{
    animation:slideOut 0.5s  linear forwards ;
    -webkit-animation:slideOut 0.5s linear forwards ; /* Safari 和 Chrome */
}
@keyframes slideOut {
    from { top: 0; } to { top: 100vh; }
}
@-webkit-keyframes slideOut{
    from { top: 0; } to { top: 100vh; }
}
.slideIn{
    animation:slideIn 0.5s  linear forwards ;
    -webkit-animation:slideIn 0.5s linear forwards ; /* Safari 和 Chrome */
}
@keyframes slideIn {
    from { top: 100vh; } to {top: 0;}
}
@-webkit-keyframes slideIn{
    from { top: 100vh; } to {top: 0;}
}
/* --------------------------------------------------------------- */

.cdText{

}
.cdText p{
    height: .67rem;
    padding: .4rem;
    font-size: .32rem;
    color: #999;
    text-align: center;
    position: relative;
    z-index: 10;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* ---------------------------------------------------------------- */

/* 封面 */
.cdBox {
    position: relative;
    margin: 1.07rem auto;
}
.coverBox {

}
.coverBox img {
    width: 6.4rem;
    height: 6.4rem;
    display: block;
    margin: auto;
    border-radius: 50%;
    box-shadow: #807D7D 0px 0.03rem 0.16rem;
    -webkit-box-shadow: #807D7D 0 0.03rem 0.16rem;
    -moz-box-shadow: #807D7D 0px 0.03rem 0.16rem;
}
</code></pre><h3 id="页面样式-audio-css"><a href="#页面样式-audio-css" class="headerlink" title="页面样式 audio.css"></a>页面样式 audio.css</h3><p>  css</p>
<pre><code>/* 播放器样式 */
*{
    font-family:&apos;PingFang-SC-Bold&apos; ;
    margin:0;
    padding: 0;
    -moz-box-sizing: border-box;  
    -webkit-box-sizing: border-box; 
    -o-box-sizing: border-box; 
    -ms-box-sizing: border-box; 
    box-sizing: border-box; 
    -webkit-overflow-scrolling: touch;
    list-style: none;
  }
a{ text-decoration: none;}
.controlBox{

}

#playContent{
    width: 100%;
    z-index: 50;
    overflow: hidden;
    text-align: center;
    min-height: 1.5rem;
}
.timeBox{ 
    overflow: hidden;
    margin-top: .27rem;
}

#currentTime { 
    font-size: .32rem;
    color: #B3B3B3;
    /* display: inline-block;
    vertical-align: middle; */
    /* margin-left: 0.16rem; */
    float: left;
}
#totleTime {
    font-size: .32rem;
    color: #B3B3B3;
    /* display: inline-block;
    vertical-align: middle; */
    /* margin-right: 0.16rem; */
    float: right;
}
#progressWrap{    
    width: 7.2rem;
    height: .12rem;
    border-radius: .09rem;
    background-color:#E6E6E6;
    position: relative;
    display: inline-block;
    vertical-align: middle;
}

#progress{
    background: #F2AC17;
    height: .12rem;
    position: absolute;
    width: 0;
    top: 0;
    left: 0;
    display: none;
}

#progress:after{
    content: &quot;&quot;;
    position: absolute;
    width: .24rem;
    background: #F2AC17;
    height: .24rem;
    top: -0.06rem;
    right: -0.24rem;
    border-radius: 50%;
}



.controlBox ul{
    width: 7.2rem;
    overflow: hidden;
    position: relative;
    z-index: 55;
    margin: .2rem auto ;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.controlBox ul li a{
    display: block;
    margin: auto;
}
.controlBox ul li.small{
    width: 1.33rem;
    height: 1.33rem;
}
.controlBox ul li.small a{
    width: 1.33rem;
    height: 1.33rem;
    border-radius: 50%;
}
.controlBox a.next{
    background:url(../img/next.png) no-repeat 50%;
    background-size: 1.33rem 1.33rem;
}
.controlBox a.prev{
    background:url(../img/pre.png) no-repeat center;
    background-size: 1.33rem 1.33rem;
} 


.controlBox ul li.playbg{
    width: 1.81rem;
    height: 1.81rem;
}
.controlBox ul li.playbg a{
    width: 1.81rem;
    height: 1.81rem;
    border-radius: 50%;
}

.controlBox a.play{
    background:url(../img/pause.png) no-repeat center;
    background-size: 1.81rem 1.81rem;
}

.controlBox a.pause{
    background:url(../img/play.png) no-repeat center;   
    background-size: 1.81rem 1.81rem;
}



.controlBox ol{
    width: 7.2rem;
    overflow: hidden;
    position: relative;
    z-index: 55;
    margin: .93rem auto  0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.controlBox ol li a{
    min-width: 1.33rem;
    display: block;
    text-align: center;
}
.controlBox ol li a i{
    display: block;
    height: .53rem;
    margin: 0 auto;
}
.controlBox ol li a span{
    display: block;
    color: #999999;
    font-size: .32rem;
}

.controlBox ol li.hasCollected i{
    background:url(../img/start.png) no-repeat center;   
    background-size: auto .48rem;
}
.controlBox ol li.hasCollected span{
    color: #F2AC17;
}
.controlBox ol li.noCollected i{
    background:url(../img/start0.png) no-repeat center;   
    background-size: auto .48rem;
}

.controlBox ol li.speed10 i{
    background:url(../img/1b.png) no-repeat center;   
    background-size: auto .48rem;
}
.controlBox ol li.speed15 i{
    background:url(../img/1.5b.png) no-repeat center;   
    background-size: auto .48rem;
}
.controlBox ol li.speed20 i{
    background:url(../img/2b.png) no-repeat center;   
    background-size: auto .48rem;
}

.controlBox ol li.directory i{
    background:url(../img/ml.png) no-repeat center;   
    background-size: auto .48rem;
}
</code></pre> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-移动端布局自适应flexible-js"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/02/01/移动端布局自适应flexible-js/"
    >移动端布局自适应flexible.js</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/02/01/移动端布局自适应flexible-js/" class="article-date">
  <time datetime="2021-02-01T09:06:41.000Z" itemprop="datePublished">2021-02-01</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="移动端flexible-js，-自适应"><a href="#移动端flexible-js，-自适应" class="headerlink" title="移动端flexible.js， 自适应"></a>移动端flexible.js， 自适应</h1><pre><code>;(function(win, lib) {
    var doc = win.document;
    var docEl = doc.documentElement;
    var metaEl = doc.querySelector(&apos;meta[name=&quot;viewport&quot;]&apos;);
    var flexibleEl = doc.querySelector(&apos;meta[name=&quot;flexible&quot;]&apos;);
    var dpr = 0;
    var scale = 0;
    var tid;
    var flexible = lib.flexible || (lib.flexible = {});

    if (metaEl) {
        console.warn(&apos;将根据已有的meta标签来设置缩放比例&apos;);
        var match = metaEl.getAttribute(&apos;content&apos;).match(/initial\-scale=([\d\.]+)/);
        if (match) {
            scale = parseFloat(match[1]);
            dpr = parseInt(1 / scale);
        }
    } else if (flexibleEl) {
        var content = flexibleEl.getAttribute(&apos;content&apos;);
        if (content) {
            var initialDpr = content.match(/initial\-dpr=([\d\.]+)/);
            var maximumDpr = content.match(/maximum\-dpr=([\d\.]+)/);
            if (initialDpr) {
                dpr = parseFloat(initialDpr[1]);
                scale = parseFloat((1 / dpr).toFixed(2));    
            }
            if (maximumDpr) {
                dpr = parseFloat(maximumDpr[1]);
                scale = parseFloat((1 / dpr).toFixed(2));    
            }
        }
    }

    if (!dpr &amp;&amp; !scale) {
        var isAndroid = win.navigator.appVersion.match(/android/gi);
        var isIPhone = win.navigator.appVersion.match(/iphone/gi);
        var devicePixelRatio = win.devicePixelRatio;
        if (isIPhone) {
            // iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案
            if (devicePixelRatio &gt;= 3 &amp;&amp; (!dpr || dpr &gt;= 3)) {                
                dpr = 3;
            } else if (devicePixelRatio &gt;= 2 &amp;&amp; (!dpr || dpr &gt;= 2)){
                dpr = 2;
            } else {
                dpr = 1;
            }
        } else {
            // 其他设备下，仍旧使用1倍的方案
            dpr = 1;
        }
        scale = 1 / dpr;
    }

    docEl.setAttribute(&apos;data-dpr&apos;, dpr);
    if (!metaEl) {
        metaEl = doc.createElement(&apos;meta&apos;);
        metaEl.setAttribute(&apos;name&apos;, &apos;viewport&apos;);
        metaEl.setAttribute(&apos;content&apos;, &apos;initial-scale=&apos; + 1 + &apos;, maximum-scale=&apos; + 1 + &apos;, minimum-scale=&apos; + 1 + &apos;, user-scalable=no&apos;);
        if (docEl.firstElementChild) {
            docEl.firstElementChild.appendChild(metaEl);
        } else {
            var wrap = doc.createElement(&apos;div&apos;);
            wrap.appendChild(metaEl);
            doc.write(wrap.innerHTML);
        }
    }

    function refreshRem(){
        var width = docEl.getBoundingClientRect().width;
        if (width / dpr &gt; 540) {
            width = 540 * dpr;
        }
        var rem = width / 10;
        docEl.style.fontSize = rem + &apos;px&apos;;
        flexible.rem = win.rem = rem;
    }

    win.addEventListener(&apos;resize&apos;, function() {
        clearTimeout(tid);
        tid = setTimeout(refreshRem, 300);
    }, false);
    win.addEventListener(&apos;pageshow&apos;, function(e) {
        if (e.persisted) {
            clearTimeout(tid);
            tid = setTimeout(refreshRem, 300);
        }
    }, false);

    if (doc.readyState === &apos;complete&apos;) {
        doc.body.style.fontSize = 12 * dpr + &apos;px&apos;;
    } else {
        doc.addEventListener(&apos;DOMContentLoaded&apos;, function(e) {
            doc.body.style.fontSize = 12 * dpr + &apos;px&apos;;
        }, false);
    }


    refreshRem();

    flexible.dpr = win.dpr = dpr;
    flexible.refreshRem = refreshRem;
    flexible.rem2px = function(d) {
        var val = parseFloat(d) * this.rem;
        if (typeof d === &apos;string&apos; &amp;&amp; d.match(/rem$/)) {
            val += &apos;px&apos;;
        }
        return val;
    }
    flexible.px2rem = function(d) {
        var val = parseFloat(d) / this.rem;
        if (typeof d === &apos;string&apos; &amp;&amp; d.match(/px$/)) {
            val += &apos;rem&apos;;
        }
        return val;
    }

})(window, window[&apos;lib&apos;] || (window[&apos;lib&apos;] = {}));
</code></pre> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-JAVAScript中DOM与BOM的差异分析"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/04/11/JAVAScript中DOM与BOM的差异分析/"
    >JAVAScript中DOM与BOM的差异分析</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2018/04/11/JAVAScript中DOM与BOM的差异分析/" class="article-date">
  <time datetime="2018-04-11T08:37:39.000Z" itemprop="datePublished">2018-04-11</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="JAVAScript中DOM与BOM的差异分析"><a href="#JAVAScript中DOM与BOM的差异分析" class="headerlink" title="JAVAScript中DOM与BOM的差异分析"></a>JAVAScript中DOM与BOM的差异分析</h1><p>JAVAScript 有三部分构成，ECMAScript，DOM和BOM，根据浏览器的不同，具体的表现形式也不尽相同。我们今天来谈一谈DOM和BOM这俩者之间的差异。</p>
<p>用百科上的来说：</p>
<ol>
<li><p>DOM是 W3C 的标准; [所有浏览器公共遵守的标准]</p>
</li>
<li><p>BOM 是 各个浏览器厂商根据 DOM在各自浏览器上的实现;[表现为不同浏览器定义有差别,实现方式不同]</p>
</li>
<li><p>window 是 BOM 对象，而非 js 对象；</p>
</li>
</ol>
<p>DOM（文档对象模型）是 HTML 和 XML 的应用程序接口（API）。</p>
<p>BOM 主要处理浏览器窗口和框架，不过通常浏览器特定的 JavaScript 扩展都被看做 BOM 的一部分。而这些扩展则包括：</p>
<pre><code>&lt;1&gt;弹出新的浏览器窗口
&lt;2&gt;移动、关闭浏览器窗口以及调整窗口大小
&lt;3&gt;提供 Web 浏览器详细信息的定位对象
&lt;4&gt;提供用户屏幕分辨率详细信息的屏幕对象
&lt;5&gt;对 cookie 的支持
&lt;6&gt;IE 扩展了 BOM，加入了 ActiveXObject 类，可以通过 JavaScript 实例化 ActiveX 对象
</code></pre><p>javacsript是通过访问BOM（Browser Object Model）对象来访问、控制、修改客户端(浏览器)，由于BOM的window包含了document，window对象的属性和方法是直接可以使用而且被感知的，因此可以直接使用window对象的document属性，通过document属性就可以访问、</p>
<p>检索、修改XHTML文档内容与结构。因为document对象又是DOM（Document Object Model）模型的根节点。可以说，BOM包含了DOM(对象)，浏览器提供出来给予访问的是BOM对象，从BOM对象再访问到DOM对象，从而js可以操作浏览器以及浏览器读取到的文档。其中</p>
<p>DOM包含：window</p>
<pre><code>1 Window对象包含属性：document、location、navigator、screen、history、frames

2 Document根节点包含子节点：forms、location、anchors、images、links
</code></pre><p>从window.document已然可以看出，DOM的最根本的对象是BOM的window对象的子对象。而他们之前的最大区别：DOM描述了处理网页内容的方法和接口，BOM描述了与浏览器进行交互的方法和接口。</p>
<p>首先我们来仔细了解一下DOM：</p>
<p>在HTML中DOM的节点层次为：</p>
<p><img src="https://a3.qpic.cn/psb?/V12MFQbM13bQsJ/XXN25GWdVPmy.uUCD5ouqfQn2Dt6DcvWevv3Q8BvcZs!/m/dEIBAAAAAAAAnull&amp;bo=4wEXAQAAAAADB9Y!&amp;rf=photolist&amp;t=5" alt=""></p>
<p>DOM操作creatElement(element)创建一个新的元素节点creatTextNode()创建一个包含给定文本的新文本节点appendChild()指定节点的最后一个节点列表后添加一个新的子节insertBefore()将一个给定节点插入到一个给定元素节点的给定子节点的前面removeChild()从一</p>
<p>个给定元素中删除子节点replaceChild()把一个给定父元素里的一个子节点替换为另外一个节点，DOM通过创建树来表示文档，描述了处理网页内容的方法和接口，从而使开发者对文档的内容和结构具有空前的控制力，用DOM API可以轻松地删除、添加和替换节点。</p>
<p>访问节点的方法如下：</p>
<pre><code>var oHtml = document.documentElement;//返回存在于 XML 以及 HTML 文档中的文档根节点oHtml包含了一个表示&lt;html /&gt;的HTMLElement对象
document.body //是对 HTML 页面的特殊扩展，提供了对 &lt;body&gt; 标签的直接访问
document.getElementById(&quot;ID&quot;) //通过指定的 ID 来返回元素，getElementById() 无法工作在 XML 中，IE6还会返回name为指定ID的元素
document.getElementByName(&quot;name&quot;)//获取所有name特性等于指定值的元素，不过在IE6和Opera7.5上还会返回id为给定名称的元素且仅检查&lt;input/&gt;和&lt;img/&gt;
var x=document.getElementsByTagName(&quot;p&quot;); //使用指定的标签名返回所有的元素列表NodeList，索引号从0开始。当参数是一个星号的时候，IE6并不返回所有的元素，必须用document.all来替代
</code></pre><p>获取到节点之后就要对它进行操作，操作的方法我们用事件来实现，事件类型有：</p>
<pre><code>鼠标事件：click、dbclick、mousedown、mouseup、mouseover、mouseout、mousemove 
键盘事件：keydown、keypress、keyup 
HTML事件：load、unload、abort、error、select、change、submit、reset、resize、scroll、focus、blur
</code></pre><p>下面我们来了解一下BOM：</p>
<p>BOM的核心是window，而window对象又具有双重角色，它既是通过js访问浏览器窗口的一个接口，又是一个Global（全局）对象。这意味着在网页中定义的任何对象，变量和函数，都以window作为其global对象。</p>
<h3 id="window-对象"><a href="#window-对象" class="headerlink" title="window 对象"></a>window 对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.close(); <span class="comment">//关闭窗口 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">window</span>.alert(<span class="string">"message"</span>); <span class="comment">//弹出一个具有OK按钮的系统消息框，显示指定的文本 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">window</span>.confirm(<span class="string">"Are you sure?"</span>); <span class="comment">//弹出一个具有OK和Cancel按钮的询问对话框，返回一个布尔值 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">window</span>.prompt(<span class="string">"What's your name?"</span>, <span class="string">"Default"</span>); <span class="comment">//提示用户输入信息，接受两个参数，即要显示给用户的文本和文本框中的默认值，将文本框中的值作为函数值返回 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">window</span>.status <span class="comment">//可以使状态栏的文本暂时改变 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">window</span>.defaultStatus <span class="comment">//默认的状态栏信息，可在用户离开当前页面前一直改变文本 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">window</span>.setTimeout(<span class="string">"alert('xxx')"</span>, <span class="number">1000</span>); <span class="comment">//设置在指定的毫秒数后执行指定的代码，接受2个参数，要执行的代码和等待的毫秒数 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">window</span>.clearTimeout(<span class="string">"ID"</span>); <span class="comment">//取消还未执行的暂停，将暂停ID传递给它 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">window</span>.setInterval(<span class="function"><span class="keyword">function</span>, 1000); //无限次地每隔指定的时间段重复一次指定的代码，参数同<span class="title">setTimeout</span>(<span class="params"></span>)一样 </span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function"><span class="title">window</span>.<span class="title">clearInterval</span>(<span class="params"><span class="string">"ID"</span></span>); //取消时间间隔，将间隔<span class="title">ID</span>传递给它 </span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function"><span class="title">window</span>.<span class="title">history</span>.<span class="title">go</span>(<span class="params"><span class="number">-1</span></span>); //访问浏览器窗口的历史，负数为后退，正数为前进 </span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function"><span class="title">window</span>.<span class="title">history</span>.<span class="title">back</span>(<span class="params"></span>); //同上 </span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function"><span class="title">window</span>.<span class="title">history</span>.<span class="title">forward</span>(<span class="params"></span>); //同上 </span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function"><span class="title">window</span>.<span class="title">history</span>.<span class="title">length</span> //可以查看历史中的页面数</span></span><br></pre></td></tr></table></figure>
<h3 id="document对象"><a href="#document对象" class="headerlink" title="document对象"></a>document对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>对象：实际上是<span class="built_in">window</span>对象的属性，<span class="built_in">document</span> == <span class="built_in">window</span>.document为<span class="literal">true</span>，是唯一一个既属于BOM又属于DOM的对象 </span><br><span class="line"> </span><br><span class="line"><span class="built_in">document</span>.lastModified <span class="comment">//获取最后一次修改页面的日期的字符串表示 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">document</span>.referrer <span class="comment">//用于跟踪用户从哪里链接过来的 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">document</span>.title <span class="comment">//获取当前页面的标题，可读写 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">document</span>.URL <span class="comment">//获取当前页面的URL，可读写 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">document</span>.anchors[<span class="number">0</span>]或<span class="built_in">document</span>.anchors[<span class="string">"anchName"</span>] <span class="comment">//访问页面中所有的锚 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">document</span>.forms[<span class="number">0</span>]或<span class="built_in">document</span>.forms[<span class="string">"formName"</span>] <span class="comment">//访问页面中所有的表单 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">document</span>.images[<span class="number">0</span>]或<span class="built_in">document</span>.images[<span class="string">"imgName"</span>] <span class="comment">// 访问页面中所有的图像 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">document</span>.links [<span class="number">0</span>]或<span class="built_in">document</span>.links[<span class="string">"linkName"</span>] <span class="comment">//访问页面中所有的链接 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">document</span>.applets [<span class="number">0</span>]或<span class="built_in">document</span>.applets[<span class="string">"appletName"</span>] <span class="comment">//访问页面中所有的Applet </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">document</span>.embeds [<span class="number">0</span>]或<span class="built_in">document</span>.embeds[<span class="string">"embedName"</span>] <span class="comment">//访问页面中所有的嵌入式对象 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">document</span>.write(); 或<span class="built_in">document</span>.writeln(); <span class="comment">//将字符串插入到调用它们的位置</span></span><br></pre></td></tr></table></figure>
<h3 id="location对象"><a href="#location对象" class="headerlink" title="location对象"></a>location对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">location对象：表示载入窗口的URL，也可用<span class="built_in">window</span>.location引用它 </span><br><span class="line"> </span><br><span class="line">location.href <span class="comment">//当前载入页面的完整URL，如http://www.somewhere.com/pictures/index.htm </span></span><br><span class="line"> </span><br><span class="line">location.portocol <span class="comment">//URL中使用的协议，即双斜杠之前的部分，如http </span></span><br><span class="line"> </span><br><span class="line">location.host <span class="comment">//服务器的名字，如www.wrox.com </span></span><br><span class="line"> </span><br><span class="line">location.hostname <span class="comment">//通常等于host，有时会省略前面的www </span></span><br><span class="line"> </span><br><span class="line">location.port <span class="comment">//URL声明的请求的端口，默认情况下，大多数URL没有端口信息，如8080 </span></span><br><span class="line"> </span><br><span class="line">location.pathname <span class="comment">//URL中主机名后的部分，如/pictures/index.htm </span></span><br><span class="line"> </span><br><span class="line">location.search <span class="comment">//执行GET请求的URL中的问号后的部分，又称查询字符串，如?param=xxxx </span></span><br><span class="line"> </span><br><span class="line">location.hash <span class="comment">//如果URL包含#，返回该符号之后的内容，如#anchor1 </span></span><br><span class="line"> </span><br><span class="line">location.assign(<span class="string">"http:www.baidu.com"</span>); <span class="comment">//同location.href，新地址都会被加到浏览器的历史栈中 </span></span><br><span class="line"> </span><br><span class="line">location.replace(<span class="string">"http:www.baidu.com"</span>); <span class="comment">//同assign()，但新地址不会被加到浏览器的历史栈中，不能通过back和forward访问 </span></span><br><span class="line"> </span><br><span class="line">location.reload(<span class="literal">true</span> | <span class="literal">false</span>); <span class="comment">//重新载入当前页面，为false时从浏览器缓存中重载，为true时从服务器端重载，默认为false</span></span><br></pre></td></tr></table></figure>
<h3 id="navigator对象"><a href="#navigator对象" class="headerlink" title="navigator对象"></a>navigator对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">navigator对象：包含大量有关Web浏览器的信息，在检测浏览器及操作系统上非常有用，也可用<span class="built_in">window</span>.navigator引用它 </span><br><span class="line"> </span><br><span class="line">navigator.appCodeName <span class="comment">//浏览器代码名的字符串表示 </span></span><br><span class="line"> </span><br><span class="line">navigator.appName <span class="comment">//官方浏览器名的字符串表示 </span></span><br><span class="line"> </span><br><span class="line">navigator.appVersion <span class="comment">//浏览器版本信息的字符串表示 </span></span><br><span class="line"> </span><br><span class="line">navigator.cookieEnabled <span class="comment">//如果启用cookie返回true，否则返回false </span></span><br><span class="line"> </span><br><span class="line">navigator.javaEnabled <span class="comment">//如果启用java返回true，否则返回false </span></span><br><span class="line"> </span><br><span class="line">navigator.platform <span class="comment">//浏览器所在计算机平台的字符串表示 </span></span><br><span class="line"> </span><br><span class="line">navigator.plugins <span class="comment">//安装在浏览器中的插件数组 </span></span><br><span class="line"> </span><br><span class="line">navigator.taintEnabled <span class="comment">//如果启用了数据污点返回true，否则返回false </span></span><br><span class="line"> </span><br><span class="line">navigator.userAgent <span class="comment">//用户代理头的字符串表示</span></span><br></pre></td></tr></table></figure>
<h3 id="screen对象"><a href="#screen对象" class="headerlink" title="screen对象"></a>screen对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">screen对象：用于获取某些关于用户屏幕的信息，也可用<span class="built_in">window</span>.screen引用它 </span><br><span class="line"> </span><br><span class="line">screen.width/height <span class="comment">//屏幕的宽度与高度，以像素计 </span></span><br><span class="line"> </span><br><span class="line">screen.availWidth/availHeight <span class="comment">//窗口可以使用的屏幕的宽度和高度，以像素计 </span></span><br><span class="line"> </span><br><span class="line">screen.colorDepth <span class="comment">//用户表示颜色的位数，大多数系统采用32位 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">window</span>.moveTo(<span class="number">0</span>, <span class="number">0</span>); </span><br><span class="line"> </span><br><span class="line"><span class="built_in">window</span>.resizeTo(screen.availWidth, screen.availHeight); <span class="comment">//填充用户的屏幕</span></span><br></pre></td></tr></table></figure>
<h2 id="window对象方法则有以下这几种："><a href="#window对象方法则有以下这几种：" class="headerlink" title="window对象方法则有以下这几种："></a>window对象方法则有以下这几种：</h2><p><img src="https://a1.qpic.cn/psb?/V12MFQbM13bQsJ/U3n6AzqQcZoMjPlnqS04BMAdi.IiByn1KRES4nG3vQM!/m/dEABAAAAAAAAnull&amp;bo=mwIzAgAAAAADB4o!&amp;rf=photolist&amp;t=5" alt="mahua"></p>
<p>BOM和DOM的结构关系示意图：</p>
<p><img src="https://a2.qpic.cn/psb?/V12MFQbM13bQsJ/HxOfucKK2wG9vDMUkN7sj4X4tFsdASUDI1vp8kAGv2s!/m/dJEAAAAAAAAAnull&amp;bo=SQOwAQAAAAADB9k!&amp;rf=photolist&amp;t=5" alt="mahua"></p>
<p>window对象思维导图：</p>
<p><img src="https://a2.qpic.cn/psb?/V12MFQbM13bQsJ/l4jfiIYHf5NJas3lcANYW4KRBZf55ksJxeWE8hRow2Y!/m/dJEAAAAAAAAAnull&amp;bo=gALSCgAAAAADB3g!&amp;rf=photolist&amp;t=5" alt="mahua"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-vue-js实战-基础篇"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2017/09/21/vue-js实战-基础篇/"
    >vue.js实战-基础篇</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2017/09/21/vue-js实战-基础篇/" class="article-date">
  <time datetime="2017-09-21T08:52:05.000Z" itemprop="datePublished">2017-09-21</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="vue-js实战-基础篇"><a href="#vue-js实战-基础篇" class="headerlink" title="vue.js实战-基础篇"></a>vue.js实战-基础篇</h2><p>之前曾看过vue.js的官方文档， 看了一些理论知识， 前段时间，自己拿以前的项目来做实践，毕竟纸上得来终觉浅嘛， 不过，由于由于时间关系，做的实例不多，刚学习vue的同学可以看看。后续自己还会深入的去学习，陆续补上。欢迎大神们来指正以及给予辅导。</p>
<h3 id="项目目录"><a href="#项目目录" class="headerlink" title="项目目录"></a>项目目录</h3><p><img src="http://a1.qpic.cn/psb?/V12MFQbM1FNN0M/LPLLIF39*wXEq5WBtpGbZ7KNVe4LIvkXAfXzvzcD0WM!/b/dOcAAAAAAAAA&amp;bo=JQFQAgAAAAADAFM!&amp;rf=viewer_4" alt="Alt text"></p>
<h3 id="注意知识点："><a href="#注意知识点：" class="headerlink" title="注意知识点："></a>注意知识点：</h3><ol>
<li><p>vue 做移动端 ， meta 直接写在index.html 的head 里</p>
<h5 id="Index-html"><a href="#Index-html" class="headerlink" title="Index.html"></a>Index.html</h5><pre><code>&lt;meta name=viewport content=&quot;width=device-width,initial-scale=1,user-scalable=no&quot;&gt;
</code></pre></li>
<li><p>v-for 的使用</p>
<p> #####VUE1.0：</p>
<pre><code>li v-for=&quot;(index,item) in items&quot; v-on:click=&quot;onclick($index)&quot;&gt;&lt;/li&gt;
</code></pre><p> #####VUE2.0 $index 已弃用：</p>
<pre><code>&lt;p v-for=&quot;(item,index) in tabs&quot; v-on:click=&quot;tabsShow(index)&quot;&gt;{{item.tabname}}&lt;/p&gt;
</code></pre><p> （参数一为key值 ， 参数二为索引值）</p>
</li>
</ol>
<p>3．组件命名时，不要用html元素如 head footer nav …..等命名。  </p>
<ol start="4">
<li><p>每个页面公用的头部和尾部直接写在app.vue 中：<br><img src="http://a3.qpic.cn/psb?/V12MFQbM1FNN0M/F1PBtSsZL..IyQl07a7PQ5mxBgKLff6yR4JP8wGwiyo!/b/dG0BAAAAAAAA&amp;bo=IQEaAQAAAAADAB4!&amp;rf=viewer_4" alt="Alt text"></p>
<p><em>注意：其他的组件页面最外层的容器不要设置高度。</em></p>
</li>
</ol>
<h3 id="一-less-安装使用"><a href="#一-less-安装使用" class="headerlink" title="一  less 安装使用"></a>一  less 安装使用</h3><p>安装less依赖</p>
<pre><code>npm install less less-loader –save
</code></pre><p>修改 <em>webpack.base.conf.js</em> 文件，配置loader加载依赖，让其支持外部的less,在原来的代码上添加</p>
<pre><code>{
    test: /\.less$/,
    loader: &apos;style-loader!css-loader!less-loader&apos;
  },
</code></pre><p>引入：</p>
<pre><code>&lt;style lang=&quot;sass&quot;&gt;
 @import &quot;/style/base.scss&quot;;(此处分号不可省)
&lt;/style&gt;
</code></pre><h3 id="二-swiper-使用"><a href="#二-swiper-使用" class="headerlink" title="二 swiper 使用"></a>二 swiper 使用</h3><p>在static 中引入 swiper [<br>Swiper.min.css<br>Swiper.min.js<br>]</p>
<p>在 .eslintrc.js 中 配置swiper    :  </p>
<pre><code>&apos;globals&apos;: {
  &apos;Swiper&apos;: true
}
</code></pre><p>组件：</p>
<pre><code>&lt;template&gt;
       &lt;div class=&quot;swiper-container&quot;&gt;
          &lt;div class=&quot;swiper-wrapper&quot;&gt;

            &lt;div class=&quot;swiper-slide&quot; v-for=&quot;item in listImg&quot;&gt;
              &lt;img class=&quot;imgload&quot; :src=&apos;item.url&apos; alt=&quot;首页banner图片01&quot;&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;!-- 如果需要分页器 --&gt;
          &lt;div class=&quot;swiper-pagination&quot;&gt;&lt;/div&gt;

          &lt;!-- 如果需要导航按钮 --&gt;

    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import &apos;../../../static/swiper/swiper.min.css&apos;
import &apos;../../../static/swiper/swiper.min.js&apos;
export default {
  props: [&apos;listImg&apos;],
  name: &apos;swiper&apos;,
  data () {
    return {
      msg: &apos;Welcome to Your Vue.js App&apos;
    }
  },
  mounted () {
    var swiper = new Swiper(&apos;.swiper-container&apos;, {
      pagination: &apos;.swiper-pagination&apos;,
      paginationClickable: true,
      loop: true,
      speed: 600,
      autoplay: 1000,
      onTouchEnd: function () {
        swiper.startAutoplay()
      }
    })
  }
}
&lt;/script&gt;

&lt;style scoped lang=&quot;less&quot;&gt;
.swiper-container {
    width: 100%;
    height:208px;
    background-color:red;
    .swiper-wrapper {
        width: 100%;
        height: 100%;
    }
    .swiper-slide {
        background-position: center;
        background-size: cover;
        width: 100%;
        height: 100%;
        img {
            width: 100%;
            height: 100%;
        }
    }
    .swiper-pagination-bullet {
        width:20px;
        height:20px;
        background-color:blue;
        display: inline-block;
        background: #7c5e53;
    }
}

&lt;/style&gt;
</code></pre><h3 id="三-vue-router-router-link-实现页面跳转"><a href="#三-vue-router-router-link-实现页面跳转" class="headerlink" title="三 vue-router + router-link 实现页面跳转"></a>三 vue-router + router-link 实现页面跳转</h3><p>构建项目时安装vue-router（会自动在项目中创建router文件，推荐使用） ，  或者 在项目中通过 cnpm install vue-touter –save 来安装。</p>
<ol>
<li><p>使用第一种方法自动安装时 router下的 xx.js 配置：</p>
<pre><code>import Vue from &apos;vue&apos;
import Router from &apos;vue-router&apos;
// 引入路由对应的组件
import Index from &apos;@/components/index&apos;
import Detail from &apos;@/components/detail&apos;
// 全局使用路由
Vue.use(Router)
// 实例化路由并且暴露
export default new Router({
  routes: [
    {
      path: &apos;/&apos;,
      name: &apos;Index&apos;,
      component: Index
    },
    {
      path: &apos;/detail&apos;,
      name: &apos;Detail&apos;,
      component: Detail
    }
  ]
})  
</code></pre></li>
<li>在main.js 中将路由 挂载在 入口上，供全局使用<br><img src="http://a3.qpic.cn/psb?/V12MFQbM1FNN0M/qTFCnHYaaXKzpldPTiEUaHUX68y6hqlhtGUmD6f1e08!/b/dD0BAAAAAAAA&amp;bo=tQFtAQAAAAADAP0!&amp;rf=viewer_4" alt="Alt text"></li>
</ol>
<p>3 组件中使用router-link to=”xxxx” 实现跳转（等同于a href=”xxx”）<br><img src="http://a2.qpic.cn/psb?/V12MFQbM1FNN0M/Mu.2S.BVRiD*iBRLuMtoVjAfi*ydwyeCwBtHwXpGtr4!/b/dDwBAAAAAAAA&amp;bo=DQLYAAAAAAADAPI!&amp;rf=viewer_4" alt="Alt text"></p>
<p><img src="http://a3.qpic.cn/psb?/V12MFQbM1FNN0M/moFDyBPAvZmPmUSlexvbe1W.XIGKHarxNoHYOgndsac!/b/dG0BAAAAAAAA&amp;bo=qQEoAgAAAAADAKc!&amp;rf=viewer_4" alt="Alt text"></p>
<h3 id="四-tab选项卡"><a href="#四-tab选项卡" class="headerlink" title="四 tab选项卡"></a>四 tab选项卡</h3><p>html:</p>
<pre><code>&lt;div  class=&quot;tabs&quot; &gt;
  &lt;p v-for=&quot;(item,index) in tabs&quot; v-on:click=&quot;tabsShow(index)&quot; :class=&quot;{active:item.iscur}&quot;&gt;{{item.tabname}}&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;tabItems&quot;&gt;   
 // 挂载当前显示的默认项
  &lt;component :is=&apos;currentView&apos; keep-alive&gt;&lt;/component&gt;
&lt;/div&gt;
</code></pre><p>Js :</p>
<pre><code>export default {
      name: &apos;Index&apos;,
      data () {
        return {
          tabs: [
            {tabname: &apos;男生&apos;, iscur: true, nowShow: &apos;list&apos;},
            {tabname: &apos;女生&apos;, iscur: false, nowShow: &apos;detail&apos;}
          ],
          currentView: &apos;list&apos;
        }
      },
      components: {
        &apos;banner&apos;: Banner,
        &apos;detail&apos;: Detail,
        &apos;list&apos;: List
      },
      methods: {
        tabsShow: function (indexs) {
          var x = this
          this.tabs.map(function (v, i) {
            if (i === indexs) {
              v.iscur = true
              x.currentView = v.nowShow
            } else {
              v.iscur = false
            }
          })
       }
     }
}
</code></pre><h3 id="五-相同组件绑定不同数据"><a href="#五-相同组件绑定不同数据" class="headerlink" title="五 相同组件绑定不同数据"></a>五 相同组件绑定不同数据</h3><p>例如：同一个swiper组件 ，在不同的父级组件下展示不同的图片源<br><img src="http://a2.qpic.cn/psb?/V12MFQbM1FNN0M/VvBJT6YCuyh3kzzBqidNa0fj7rL5SB9*t9FigNEazg4!/b/dDwBAAAAAAAA&amp;bo=.gBhAQAAAAADAL8!&amp;rf=viewer_4" alt="Alt text"><br><img src="http://a2.qpic.cn/psb?/V12MFQbM1FNN0M/qm79wjSJiTw0QB*GJ..8jaVOq6bBtCLb9S53xvJaa0U!/b/dDwBAAAAAAAA&amp;bo=FQFoAQAAAAADAFg!&amp;rf=viewer_4" alt="Alt text"></p>
<p>主页 三组数据：<br><img src="http://a3.qpic.cn/psb?/V12MFQbM1FNN0M/vW8FmVfHrAtVPZnrjJCC.RRP0VG4Ydf1i4F5MZWuLnw!/b/dD0BAAAAAAAA&amp;bo=XAHzAAAAAAADAIs!&amp;rf=viewer_4" alt="Alt text"></p>
<p>在子组件上绑定数据，供子组件直接使用， 需要用什么数据就绑定什么数据（实际具体数据通过请求接口，此处为示例）<br><img src="http://a3.qpic.cn/psb?/V12MFQbM1FNN0M/xLvmMRwcWQIk6mrVD2gJB4bNYukgMDdsoOY8wiBh4cU!/b/dG0BAAAAAAAA&amp;bo=LgLCAAAAAAADAMs!&amp;rf=viewer_4" alt="Alt text"></p>
<p>在子组件中通过prop 继承父级Data<br><img src="http://a2.qpic.cn/psb?/V12MFQbM1FNN0M/bnA68OGA5cTCGwYkWSbO3hudXoBzuhSd1PcFLr34gWc!/b/dDwBAAAAAAAA&amp;bo=LgIPAQAAAAADAAc!&amp;rf=viewer_4" alt="Alt text"></p>
<p>在公共组件swiper 中 使用逻辑运算符即可：<br><img src="http://a3.qpic.cn/psb?/V12MFQbM1FNN0M/u*g9gOW.W8gkDliyoQPnVjoBdvgYhTO1tlU9r1aTreg!/b/dIUBAAAAAAAA&amp;bo=LgLmAAAAAAADAO8!&amp;rf=viewer_4" alt="Alt text"></p>
<h3 id="六-使用vuex-来存储数据-供全局使用"><a href="#六-使用vuex-来存储数据-供全局使用" class="headerlink" title="六 使用vuex 来存储数据 供全局使用"></a>六 使用vuex 来存储数据 供全局使用</h3><p>1 安装 npm install vuex –save<br>2 在 src 下 建一个store.js 文件<br>3 引入 vue vuex<br><img src="http://a3.qpic.cn/psb?/V12MFQbM1FNN0M/2V6WIvp6lFAtPOl7Pu4VLLdEg2gGM0H5PUNvM9QBonQ!/b/dD0BAAAAAAAA&amp;bo=LgJ2AQAAAAADAH4!&amp;rf=viewer_4" alt="Alt text"></p>
<p>4 在需要使用数据的 .vue 中 data取出<br><img src="http://a3.qpic.cn/psb?/V12MFQbM1FNN0M/FfK3U0yX0joe1H23H.gfxkZbgzOYO4VAe6D2vz55K34!/b/dD0BAAAAAAAA&amp;bo=jwFgAQAAAAADAMo!&amp;rf=viewer_4" alt="Alt text"></p>
<p><img src="http://a3.qpic.cn/psb?/V12MFQbM1FNN0M/BJES12jJSeNJH2SdOyU319KmHL.0GtG2lwvUrlyvGcQ!/b/dIUBAAAAAAAA&amp;bo=vgHYAAAAAAADAEI!&amp;rf=viewer_4" alt="Alt text"></p>
<h3 id="七-使用公用的js-内的方法"><a href="#七-使用公用的js-内的方法" class="headerlink" title="七 使用公用的js 内的方法"></a>七 使用公用的js 内的方法</h3><p>例如在index.vue 中使用common.js中的init方法  ：<br><img src="http://a3.qpic.cn/psb?/V12MFQbM1FNN0M/jAXYswYpZwwxsLB6ZeBs0A9wmLgZqLty80wigJYLshY!/b/dD0BAAAAAAAA&amp;bo=ywCtAQAAAAADAEI!&amp;rf=viewer_4" alt="Alt text"></p>
<p>1    写入的方法 用 export暴露出来否则会报错（需要注意）<br><img src="http://a3.qpic.cn/psb?/V12MFQbM1FNN0M/eOg*ecZXgLYBlq6RmGrQ09.yo0HQ7BR4P2gCNvNtgb8!/b/dIUBAAAAAAAA&amp;bo=rwFvAQAAAAADAOU!&amp;rf=viewer_4" alt="Alt text"></p>
<p>2 在需要的文件中引入 { 方法 } 并且在method 中注入</p>
<p><img src="http://a2.qpic.cn/psb?/V12MFQbM1FNN0M/GOwCr*V6FB4IuZnz4ZyljQ9.GVuPdRi79qdQ4BiO5UQ!/b/dDwBAAAAAAAA&amp;bo=HAJ6AQAAAAADAEA!&amp;rf=viewer_4" alt="Alt text"></p>
<h3 id="八-img-图片绑定路径问题"><a href="#八-img-图片绑定路径问题" class="headerlink" title="八 img 图片绑定路径问题"></a>八 img 图片绑定路径问题</h3><p>1 本地图片直接使用相对路径。<br>2    动态图片 v-bind：src=””<br>3    固定的图片属于静态文件。放置于static . 直接./static/…png 就可获取  </p>
<h3 id="今天的分享就到此了，-下次再继续深入。"><a href="#今天的分享就到此了，-下次再继续深入。" class="headerlink" title="今天的分享就到此了， 下次再继续深入。"></a>今天的分享就到此了， 下次再继续深入。</h3><p><strong>版权声明： 本博客内容由本人自己所著。转载请注明出处！</strong></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-React-Native学习指南"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2016/11/28/React-Native学习指南/"
    >React-Native学习指南</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2016/11/28/React-Native学习指南/" class="article-date">
  <time datetime="2016-11-28T11:56:17.000Z" itemprop="datePublished">2016-11-28</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="React-Native学习指南"><a href="#React-Native学习指南" class="headerlink" title="React-Native学习指南"></a>React-Native学习指南</h3><p>最近在自学React-Native。在网上发现别人整理了一份针对学的React-Native的网站网址，觉得还挺有用的，就收藏了，顺便分享一下。</p>
<p>更详细的可参考 <a href="http://www.w3ctech.com/topic/909" target="_blank" rel="noopener"> http://www.w3ctech.com/topic/909</a></p>
<h4 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h4><p>react-native 官方api文档 <a href="http://facebook.github.io/react-native/docs/getting-started.html" target="_blank" rel="noopener"> http://facebook.github.io/react-native/docs/getting-started.html</a></p>
<p>react-native 中文api文档 (翻译中) <a href="https://github.com/ecomfe/react-native-cn" target="_blank" rel="noopener">https://github.com/ecomfe/react-native-cn</a></p>
<p>react.js中文文档 <a href="http://reactjs.cn/" target="_blank" rel="noopener">http://reactjs.cn/</a></p>
<p>react.js入门教程(gitbook) <a href="http://hulufei.gitbooks.io/react-tutorial/content/introduction.html" target="_blank" rel="noopener">http://hulufei.gitbooks.io/react-tutorial/content/introduction.html
</a></p>
<p>react.js快速入门教程 - 阮一峰 <a href="http://www.ruanyifeng.com/blog/2015/03/react.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2015/03/react.html</a></p>
<p>react.js视频教程 <a href="http://react.nodejs-china.org/t/reactjszhong-wen-shi-pin-jiao-cheng-bai-du-wang-pan/584" target="_blank" rel="noopener">http://react.nodejs-china.org/t/reactjszhong-wen-shi-pin-jiao-cheng-bai-du-wang-pan/584</a></p>
<p>react-native第一课 <a href="http://html-js.com/article/2783" target="_blank" rel="noopener">http://html-js.com/article/2783</a></p>
<p>深入浅出 React Native：使用 JavaScript 构建原生应用 <a href="http://zhuanlan.zhihu.com/FrontendMagazine/19996445" target="_blank" rel="noopener">http://zhuanlan.zhihu.com/FrontendMagazine/19996445
</a></p>
<p>React Native通信机制详解 <a href="http://blog.cnbang.net/tech/2698/" target="_blank" rel="noopener">http://blog.cnbang.net/tech/2698/</a></p>
<p>React Native布局篇 <a href="http://segmentfault.com/a/1190000002658374" target="_blank" rel="noopener">http://segmentfault.com/a/1190000002658374</a></p>
<p>React Native 基础练习指北（一） <a href="http://segmentfault.com/a/1190000002645929http://segmentfault.com/a/1190000002645929" target="_blank" rel="noopener"></a></p>
<p>React Native 基础练习指北（二） <a href="http://segmentfault.com/a/1190000002647733" target="_blank" rel="noopener">http://segmentfault.com/a/1190000002647733</a></p>
<p>构建一个简单的列表页和2页导航 <a href="http://www.xn--cnq920ntha.cn/archives/235#6838470-tsina-1-17436-6a377b1a66595f9ede646cf5c012734c" target="_blank" rel="noopener">http://www.xn–cnq920ntha.cn/archives/235#6838470-tsina-1-17436-6a377b1a66595f9ede646cf5c012734c</a></p>
<p>Diary of Building an iOS App with React Native <a href="http://herman.asia/building-a-flashcard-app-with-react-native" target="_blank" rel="noopener">http://herman.asia/building-a-flashcard-app-with-react-native
</a></p>
<p>Use React Native in Existing iOS App <a href="http://blog-en.leapoahead.com/post/use-react-native-in-existing-ios-app" target="_blank" rel="noopener">http://blog-en.leapoahead.com/post/use-react-native-in-existing-ios-app
</a></p>
<p>tcomb-form-native使用视频教程(需翻墙) <a href="http://react.rocks/example/tcomb-form-native" target="_blank" rel="noopener">http://react.rocks/example/tcomb-form-native</a></p>
<h4 id="开源APP"><a href="#开源APP" class="headerlink" title="开源APP"></a>开源APP</h4><p>研究源码也是一个很好的学习方式</p>
<p>官方演示 <a href="App https://github.com/facebook/react-native/tree/master/Examples">App https://github.com/facebook/react-native/tree/master/Examples</a></p>
<p>ReactNativeRubyChina <a href="https://github.com/henter/ReactNativeRubyChina" target="_blank" rel="noopener">https://github.com/henter/ReactNativeRubyChina</a></p>
<p>HackerNews-React-Native <a href="https://github.com/iSimar/HackerNews-React-Native" target="_blank" rel="noopener">https://github.com/iSimar/HackerNews-React-Native</a></p>
<p>React-Native新闻客户端 <a href="https://github.com/tabalt/ReactNativeNews" target="_blank" rel="noopener">https://github.com/tabalt/ReactNativeNews</a></p>
<p>newswatch(新闻客户端) <a href="https://github.com/bradoyler/newswatch-react-native" target="_blank" rel="noopener">https://github.com/bradoyler/newswatch-react-native</a></p>
<p>buyscreen(购买页面) <a href="https://github.com/appintheair/react-native-buyscreen" target="_blank" rel="noopener">https://github.com/appintheair/react-native-buyscreen</a></p>
<p>V2EX客户端 <a href="https://github.com/samuel1112/v2er" target="_blank" rel="noopener">https://github.com/samuel1112/v2er</a></p>
<p>react-native-todo <a href="https://github.com/joemaddalone/react-native-todohttps://github.com/joemaddalone/react-native-todo" target="_blank" rel="noopener"></a></p>
<p>react-native-beer <a href="https://github.com/muratsu/react-native-beer" target="_blank" rel="noopener">https://github.com/muratsu/react-native-beer</a></p>
<p>react-native-stars <a href="https://github.com/86/react-native-stars" target="_blank" rel="noopener">https://github.com/86/react-native-stars
</a></p>
<p>模仿天猫首页的app <a href="https://github.com/baofen14787/react-native-demo" target="_blank" rel="noopener">https://github.com/baofen14787/react-native-demo</a></p>
<p>ReactNativeChess <a href="https://github.com/csarsam/ReactNativeChess" target="_blank" rel="noopener">https://github.com/csarsam/ReactNativeChess</a></p>
<p>react native 编写的音乐软件 <a href="https://github.com/Johnqing/miumiu" target="_blank" rel="noopener">https://github.com/Johnqing/miumiu</a></p>
<p>react-native-pokedex <a href="https://github.com/ababol/react-native-pokedex" target="_blank" rel="noopener">https://github.com/ababol/react-native-pokedex</a></p>
<p>CNode-React-Native <a href="https://github.com/SFantasy/CNode-React-Native" target="_blank" rel="noopener">https://github.com/SFantasy/CNode-React-Native</a></p>
<p>8tracks电台客户端 <a href="https://github.com/voronianski/EightTracksReactNative" target="_blank" rel="noopener">https://github.com/voronianski/EightTracksReactNative</a></p>
<p>React-Native实现的计算器 <a href="https://github.com/yoxisem544/Calculator-using-React-Native" target="_blank" rel="noopener">https://github.com/yoxisem544/Calculator-using-React-Native
</a></p>
<p>房产搜索app <a href="https://github.com/jawee/react-native-PropertyFinder" target="_blank" rel="noopener">https://github.com/jawee/react-native-PropertyFinder</a></p>
<p>知乎专栏app <a href="https://github.com/LeezQ/react-native-zhihu-app" target="_blank" rel="noopener">https://github.com/LeezQ/react-native-zhihu-app</a></p>
<p>ForeignExchangeApp <a href="https://github.com/peralmq/ForeignExchangeApp" target="_blank" rel="noopener">https://github.com/peralmq/ForeignExchangeApp</a></p>
<h4 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h4><p>react-native-snippets(代码提示) <a href="https://github.com/Shrugs/react-native-snippets" target="_blank" rel="noopener">https://github.com/Shrugs/react-native-snippets</a></p>
<p>react-native-babel(使用ES6+) <a href="https://github.com/roman01la/react-native-babel" target="_blank" rel="noopener">https://github.com/roman01la/react-native-babel</a></p>
<p>资源网站</p>
<p>React-native官网 <a href="http://facebook.github.io/react-native/" target="_blank" rel="noopener">http://facebook.github.io/react-native/</a></p>
<p>React-China社区 <a href="http://react-china.org/" target="_blank" rel="noopener">http://react-china.org/</a></p>
<p>React-native组件库（比较全的组件库） <a href="http://react.parts/" target="_blank" rel="noopener">http://react.parts/</a></p>
<p>React Native Modules <a href="http://reactnativemodules.com/" target="_blank" rel="noopener">http://reactnativemodules.com/</a></p>
<p>11款React Native开源移动 UI 组件 <a href="http://www.oschina.net/news/61214/11-react-native-ui-components" target="_blank" rel="noopener">http://www.oschina.net/news/61214/11-react-native-ui-components</a></p>
<p>业界讨论</p>
<p>谈谈 React Native - 唐巧 <a href="http://blog.devtang.com/blog/2015/02/01/talk-about-react-native/" target="_blank" rel="noopener">http://blog.devtang.com/blog/2015/02/01/talk-about-react-native/</a></p>
<p>如何评价React-Native? <a href="http://www.zhihu.com/question/27852694/answer/43990708" target="_blank" rel="noopener">http://www.zhihu.com/question/27852694/answer/43990708</a></p>
<p>React Native概述：背景、规划和风险 <a href="http://div.io/topic/938" target="_blank" rel="noopener">http://div.io/topic/938</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Mongoose基础篇"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2016/11/18/Mongoose基础篇/"
    >Mongoose基础篇</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2016/11/18/Mongoose基础篇/" class="article-date">
  <time datetime="2016-11-18T01:34:07.000Z" itemprop="datePublished">2016-11-18</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="Mongoose基础篇"><a href="#Mongoose基础篇" class="headerlink" title="Mongoose基础篇"></a>Mongoose基础篇</h2><p>MongoDB 是由C++语言编写的，是一个基于分布式文件存储的开源数据库系统</p>
<p>MongoDB 旨在为WEB应用提供可扩展的高性能数据存储解决方案。<br>MongoDB 将数据存储为一个文档，数据结构由键值(key=&gt;value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组。</p>
<h4 id="MongoDB-下载"><a href="#MongoDB-下载" class="headerlink" title="MongoDB 下载"></a>MongoDB 下载</h4><p>你可以在mongodb官网下载该安装包，地址为 <a href="http://www.mongodb.org/downloads" target="_blank" rel="noopener"> http://www.mongodb.org/downloads</a></p>
<p><code>Schema</code> 一种以文件形式存储的数据库模型骨架，不具备数据库的操作能力</p>
<p><code>Model</code>  由<code>Schema</code>发布生成的模型，具有抽象属性和行为的数据库操作对</p>
<p><code>Entity</code> 由<code>Model</code>创建的实体，他的操作也会影响数据库</p>
<p><code>Schema</code>、<code>Model</code>、<code>Entity</code>的关系 :<br>    <code></code>Schema<code>生成</code>Mode<code>，</code>Model<code>创造</code>Entity<code>，</code>Model<code>和</code>Entity<code>都可对数据库操作造成影响，但</code>Model<code>比</code>Entity`更具操作性。</p>
<h4 id="MongoDB-使用"><a href="#MongoDB-使用" class="headerlink" title="MongoDB 使用"></a>MongoDB 使用</h4><p>1.首先你必须安装MongoDB和NodeJS</p>
<p>2.在项目只能够创建一个数据库连接，如下:</p>
<pre><code>var mongoose = require(&apos;mongoose&apos;);    //引用mongoose模块
var db = mongoose.createConnection(&apos;localhost&apos;,&apos;test&apos;); //    创建一个数据库连接
</code></pre><p>3.打开本机localhost的test数据库时，我们可以监测</p>
<p>4.在工作文档中定义一个Schema</p>
<pre><code>var userSchema=new mongoose.Schema({
username:String,
password:String,
email:String,
});
</code></pre><p>schemas中的数据类型有以下几种：</p>
<ul>
<li><p>String</p>
</li>
<li><p>Number</p>
</li>
<li><p>Date</p>
</li>
<li><p>Boolean</p>
</li>
<li><p>Buffer</p>
</li>
<li><p>ObjectId</p>
</li>
<li><p>Mixed</p>
</li>
<li><p>Array</p>
</li>
</ul>
<p>特别需要说明一下ObjectId类型和Mixed类型以及Array类型，在schemas中声明这几</p>
<p>种类型的方式如下：</p>
<p>ObjectId就类似于唯一键值</p>
<p>  projectSchema.add({</p>
<p>  owner: mongoose.Schema.Types.ObjectId<br>  })</p>
<p> //混合类型，顾名思义，就是说里面可以放置任意类型的数据，有两种方式创建该类型数据</p>
<p> //方式一：直接赋予一个空的字面量对象<br> vardjSchema= new mongoose.Schema({<br>      mixedUp: {}<br>  });</p>
<p> //方式二：根据Schemas.Types中值来赋予<br> vardjSchema= new mongoose.Schema({<br>     mixedUp: Schema.Types.Mixed<br> });</p>
<p> //Array类型数据有两种创建方式，一种是简单数组创建：<br> var userSchema = new mongoose.Schema({<br>     name: String,<br>     emailAddresses: [String]<br> });</p>
<p> //第二种方式就是复杂类型数据数组，例如我们可以再数组中添加不同类型的schemas:</p>
<pre><code> var emailSchema = new mongoose.Schema({
 email: String,
 verified: Boolean
});
 var userSchema = new mongoose.Schema({
 name: String,
 emailAddresses: [emailSchema]
 });
 //注意：如果定义一个空的数据的话，则会创建为一个混合类型数据的数组：
 var emailSchema = new mongoose.Schema({
 email: String,
 verified: Boolean
 });
 var userSchema = new mongoose.Schema({
 name: String,
 emailAddresses: [emailSchema]
 });
</code></pre><p>5 将Schema发布为Model,并且输出</p>
<pre><code>module.exports={
users:mongoose.model(&apos;users&apos;,userSchema,&apos;users&apos;)
}

// model后的参数 第一个users是模型model的名字，可以随便取名

// 参数二是产出model的Schema名，和上面的要对应，

// 参数3是数据库下的集合名称，可以随意取
</code></pre><p>6.我们甚至可以为此Schema创建方法</p>
<pre><code>//为Schema模型追加speak方法
PersonSchema.methos.speak = function(){
 console.log(&apos;我的名字叫&apos;+this.name);
}
var PersonModel = db.model(&apos;Person&apos;,PersonSchema);
var personEntity = new PersonModel({name:&apos;Krouky&apos;});
personEntity.speak();//我的名字叫Krouky
</code></pre><p>7 如果要执行查询，需要依赖Model，当然Entity也是可以做到的</p>
<pre><code> PersonModel.find(function(err,persons){
  //查询到的所有person
});
</code></pre><h4 id="查找数据和读取数据的方法"><a href="#查找数据和读取数据的方法" class="headerlink" title="查找数据和读取数据的方法"></a>查找数据和读取数据的方法</h4><h5 id="查询的方式"><a href="#查询的方式" class="headerlink" title="查询的方式"></a>查询的方式</h5><p>通常有2种查询方式，一种是<code>直接查询</code>，一种是<code>链式查询</code>（2种查询都是自己命名的）<br><code>直接查询</code> 在查询时带有回调函数的，称之为直接查询，查询的条件往往通过API来设定，例如：</p>
<pre><code>PersonModel.findOne({&apos;name.last&apos;:&apos;dragon&apos;},&apos;some     select&apos;,function(err,person){
  //如果err==null，则person就能取到数据
});
</code></pre><p><code>链式查询</code> 在查询时候，不带回调，而查询条件通过API函数来制定，例如：</p>
<pre><code>var query = PersonModel.findOne({&apos;name.last&apos;:&apos;dragon&apos;});
query.select(&apos;some select&apos;);
query.exec(function(err,pserson){
//如果err==null，则person就能取到数据
  });
  这种方式相对直接查询，分的比较明细，如果不带callback，则返回query，query    没有执行的预编译查询语句，该query对象执行的方法都将返回自己，只有在执行    exec方法时才执行查询，而且必须有回调。    
</code></pre><h5 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h5><p>有三种方式来更新数据：</p>
<p>(1)update(conditions,update,options,callback); </p>
<p>该方法会匹配到所查找的内容进行更新，不会返回数据；</p>
<p>(2)findOneAndUpdate(conditions,update,options,callback);</p>
<p>该方法会根据查找去更新数据库，另外也会返回查找到的并未改变的数据；</p>
<p>(3)findByIdAndUpdate(conditions,update,options,callback);</p>
<p>该方法跟上面的findOneAndUpdate方法功能一样，不过他是根据ID来查找文档并更新的。</p>
<p>三个方法都包含四个参数，一下稍微说明一下几个参数的意思：</p>
<p>conditions:查询条件</p>
<p>update:更新的数据对象，是一个包含键值对的对象</p>
<p>options:是一个声明操作类型的选项，这个参数在下面再详细介绍</p>
<p>callback:回调函数</p>
<p>对于options参数，在update方法中和findOneAndUpdate、findByIdAndUpdate</p>
<p>两个方法中的可选设置是不同的；</p>
<p> //在update方法中，options的可选设置为：</p>
<p> {</p>
<p>  safe:true|false,  //声明是否返回错误信息，默认true</p>
<p>  upsert:false|true, //声明如果查询不到需要更新的数据项，是否需要新插入一</p>
<p> 条记录，默认false</p>
<p> multi:false|true,  //声明是否可以同时更新多条记录，默认false</p>
<p> strict:true|false  //声明更新的数据中是否可以包含在schema定义之外的字段</p>
<p>  数据，默认true</p>
<p> }</p>
<p> //对于findOneAndUpdate、findByIdAndUpdate这两个方法，他们的options可</p>
<p> 选设置项为：</p>
<p> {</p>
<p> new:true|false, //声明返回的数据时更新后的该是更新前的，如果为true则返回</p>
<p> 更新后的，默认true</p>
<p>upsert:false|trure, </p>
<p> sort:javascriptObject, //如果查询返回多个文档记录，则可以进行排序，在这</p>
<p> 里是根据传入的javascript object对象进行排序</p>
<p> select:String //这里声明要返回的字段，值是一个字符串</p>
<p> }</p>
<h5 id="数据删除"><a href="#数据删除" class="headerlink" title="数据删除"></a>数据删除</h5><p>跟更新数据一样，也有三种方法给我们删除数据：</p>
<p>remove();</p>
<p>findOneAndRemove();</p>
<p>findByIdAndRemove();</p>
<h5 id="数据验证"><a href="#数据验证" class="headerlink" title="数据验证"></a>数据验证</h5><p>mongoose内置数据验证</p>
<p>在mongoose中，数据验证这一层是放在schema中的，mongoose已经帮我们做了很多内</p>
<p>置的数据验证，有一些验证是针对某些数据类型的，也有一些是针对所有数据类型的。</p>
<p>能够作用在所有数据类型上的验证有require，意思就是该字段是否是必须的，例如：</p>
<p>email: { type: String, unique: true, required: true }</p>
<p>上面的代码就定义了一个email是必须的schema.</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-NodeJs常用核心模块简介"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2016/11/16/NodeJs常用核心模块简介/"
    >NodeJs常用核心模块简介</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2016/11/16/NodeJs常用核心模块简介/" class="article-date">
  <time datetime="2016-11-16T02:40:50.000Z" itemprop="datePublished">2016-11-16</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="NodeJs常用核心模块简介"><a href="#NodeJs常用核心模块简介" class="headerlink" title="NodeJs常用核心模块简介"></a>NodeJs常用核心模块简介</h3><h4 id="fs-文件管理"><a href="#fs-文件管理" class="headerlink" title="fs 文件管理"></a>fs 文件管理</h4><p>fs 模块提供了异步和同步2个版本     fs.readFile()    fs.readFileSync()<br>1.写入文件内容</p>
<pre><code>fs.writeFile(‘test.txt’, ‘Hello Node’ , [encoding], [callback]);
</code></pre><p>2.追加写入</p>
<pre><code>fs.appendFile(‘test.txt’,‘Hello Node’,[encoding],[callback]);
</code></pre><p>3.文件是否存在</p>
<pre><code>fs.exists(‘test.txt’,[callback]);
</code></pre><p>4.读取文件内容</p>
<pre><code>fs.readFile(‘test.txt’, [encoding], [callback]);
</code></pre><p>5.修改文件名</p>
<pre><code>fs.rename(旧文件,新文件,[callback]);
</code></pre><p>6.移动文件. 没有专门函数,通过修改文件名可以达到目的</p>
<pre><code>fs.rename(oldPath,newPath,[callback]);
</code></pre><p>7.删除文件</p>
<pre><code>fs.unlink(‘test.txt’, [callback]);
</code></pre><p>8.创建目录</p>
<pre><code>fs.mkdir(路径, 权限, [callback]);
路径：新创建的目录。
权限：可选参数，只在linux下有效，表示目录的权限，默认为0777，表示文件所有    者、文件所有者所在的组的*用户、*所有用户，都有权限进行读、写、执行的操作。
</code></pre><p>9.删除目录</p>
<pre><code>fs.rmdir(path, [callback]);
</code></pre><p>10.读取目录. 读取到指定目录下所有的文件</p>
<pre><code>fs.readdir(path, [callback]);
</code></pre><p>11.打开文件</p>
<pre><code>fs.open(path,flags, [mode], [callback(err,fd)])
</code></pre><p>12.关闭文件</p>
<pre><code>fs.close(fd, [callback(err)])
</code></pre><p>13.读取文件</p>
<pre><code>fs.read(fd,buffer,offset,length,position,[callback(err,     bytesRead, buffer)])
</code></pre><p>14.写入文件</p>
<pre><code>fs.writeFile(filename, data,[encoding],[callback(err)])
</code></pre><p>15.修改文件时间戳</p>
<pre><code>fs.utimes(path, atime, mtime, [callback(err)])
</code></pre><h3 id="url-文件管理"><a href="#url-文件管理" class="headerlink" title="url 文件管理"></a>url 文件管理</h3><p>1 .解析url - 条件解析</p>
<pre><code>url.parse(‘http://www.baidu.com?page=1’,true);
结果如: { protocol: ‘http:’,
slashes: true,
auth: null,
host: ‘www.baidu.com’,
port: null,
hostname: ‘www.baidu.com’,
hash: null,
search: ‘?page=1’,
query: { page: ‘1’ },
pathname: ‘/’,
path: ‘/?page=1’,
href: ‘http://www.baidu.com/?page=1’ }
</code></pre><p>2.解析url，返回一个json格式的数组</p>
<pre><code>url.parse(‘http://www.baidu.com’);
结果如: { protocol: ‘http:’,
slashes: null,
auth: null,
host: null,
port: null,
hostname: null,
hash: null,
search: null,
query: null,
pathname: ‘www.baidu.com’,
path: ‘www.baidu.com’,
href: ‘http://www.baidu.com’ }
</code></pre><p>3.格式化为url. 将json数组逆向成url</p>
<pre><code>url.format({
protocol: ‘http:’,
hostname:‘www.baidu.com’,
port:‘80’,
pathname :’/news’,
query:{page:1}
});
结果如: http://www.baidu.com/news?page=1
</code></pre><p>4.封装路径</p>
<pre><code>url.resolve(‘http://example.com/’, ‘/one’)  // &apos;http://example.com/one’
url.resolve(‘http://example.com/one’, ‘/two’) // ‘http://example.com/two’
</code></pre><h3 id="path-路径管理"><a href="#path-路径管理" class="headerlink" title="path 路径管理"></a>path 路径管理</h3><p>1.格式化路径. 将不符合规范的路径经过格式化转换为标准路径,解析路径中的.与…外，还能去掉多余的斜杠</p>
<pre><code>path.normalize(’/path///normalize/hi/…’);
结果如: ‘/path/normalize/’ 标准化之后的路径里的斜杠在Windows系统下    是，而在Linux系统下是/
</code></pre><p>2.组合路径</p>
<pre><code>path.join(’///you’, ‘/are’, ‘//beautiful’);
结果如:  ‘/you/are/beautiful’
</code></pre><p>3.返回路径中的目录名</p>
<pre><code>path.dirname(’/foo/strong/cool/nice’);
结果如: ‘/foo/strong/cool’
</code></pre><p>4.返回路径最后一部分,还可以排除指定字符串</p>
<pre><code>path.basename(’/foo/strong/basename/index.html’);
path.basename(’/foo/strong/basename/index.html’,’.html’);
结果如: index.html 和 index
</code></pre><p>5.返回路径后缀</p>
<pre><code>path.extname(‘index.html’);
结果如: .html
</code></pre><h3 id="Query-String-字符串转换"><a href="#Query-String-字符串转换" class="headerlink" title="Query String 字符串转换"></a>Query String 字符串转换</h3><p>1.序列化对象.将对象类型转换成一个字符串类型（默认的分割符（“&amp;”）和分配符（“=”））</p>
<pre><code>querystring.stringify({foo:‘bar’,cool:[‘xux’, ‘yys’]});
结果如: foo=bar&amp;cool=xux&amp;cool=yys

 重载1: querystring.stringify({foo:‘bar’,cool:[‘xux’,     ‘yys’]},’*’,’$’);
结果如: foo$bar*cool$xux*cool$yys
</code></pre><p>2.反序列化</p>
<pre><code>querystring.parse(‘foo@bar$cool@xux$cool@yys’,’@’,’$’);
结果如: { foo: ‘bar’ ,  cool: [‘xux’, ‘yys’] }
</code></pre><h3 id="http-HTTP"><a href="#http-HTTP" class="headerlink" title="http HTTP"></a>http HTTP</h3><p>2个方法</p>
<pre><code>http.createServer([requestListener])  创建HTTP服务器
http.createClient([port], [host])     创建HTTP客户端
</code></pre><h5 id="http-Server"><a href="#http-Server" class="headerlink" title="http.Server"></a>http.Server</h5><p>由 http.createServer 创建所返回的实例</p>
<h5 id="http-Server-事件"><a href="#http-Server-事件" class="headerlink" title="http.Server 事件"></a>http.Server 事件</h5><p>request 客户端请求到来<br>提供2个参数: req, res  分别是http.ServerRequest 和  http.ServerResponse  的实例.表示请求和响应消息</p>
<p>connection TCP建立连接时触发<br>提供1个 socket 参数 net.Socket 实例</p>
<p>close 服务器关闭时触发<br>无参数</p>
<p>还有checkContinue 、 upgrade 、 clientError 等事件. request 经常使用,所以包含在了 createServer函数中</p>
<h5 id="http-ServerRequest-对象"><a href="#http-ServerRequest-对象" class="headerlink" title="http.ServerRequest 对象"></a>http.ServerRequest 对象</h5><p>HTTP请求的消息, 一般由 http.Server的 request 事件发送</p>
<h5 id="属性"><a href="#属性" class="headerlink" title="属性:"></a>属性:</h5><pre><code>complete          客户端请求是否已经发送完成
httpVersion      HTTP 协议版本，通常是 1.0 或 1.1
method          HTTP 请求方法，如 GET、POST、PUT、DELETE 等
url              原始的请求路径，例如 /static/image/x.jpg 或 /    user?name=byvoid
headers          HTTP 请求头
trailers          HTTP 请求尾（不常见）
connection      当前 HTTP 连接套接字，为 net.Socket 的实例
socket          connection 属性的别名
client          client 属性的别名
</code></pre><p><strong>GET :</strong> 的请求是直接嵌入路径中的. 解析?后面的路径就行了.  url 模块中  parse 函数提供了这个功能</p>
<p><strong>POST : </strong></p>
<pre><code>**HTTP 请求分: 请求头.  请求体**
http.ServerRequest 提供3个事件控制请求体传输
data:    请求体数据来到时. 参数 chunk 表示接收到的数据
end:    请求体数据传输完成时
close    用户当前请求结束时


    var post = &apos;&apos;;
    req.on(&apos;data&apos;, function(chunk) {    post += chunk;        });
    req.on(&apos;end&apos;, function() {    post =     querystring.parse(post);
    res.end(util.inspect(post));});
</code></pre><h5 id="http-ServerResponse-对象"><a href="#http-ServerResponse-对象" class="headerlink" title="http.ServerResponse 对象"></a>http.ServerResponse 对象</h5><p>http.ServerResponse是返回给客户端的信息,决定了用户最终看到的结果. 有3个重要的成员函数. 用于响应头,响应内容以及结束请求</p>
<p>1.向客户端发送响应头</p>
<pre><code>res.writeHead(statusCode, [headers])
statusCode, 是HTTP状态码. 如200,404.

headers 类似数组的对象,表示响应头的每个属性
{
“Content-Type”: “text/html”,
“Connection”: “keep-alive”
}
</code></pre><p>2.发送响应内容, 如果是字符串,需要制定编码方式, 默认 utf-8</p>
<pre><code>res.write(data, [encoding])
</code></pre><p>3.结束响应,告知客户端所有响应完成. 此函数必须调用一次</p>
<pre><code>res.end([data] , [encoding] )
</code></pre><h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><p>挂接模块</p>
<pre><code>var EventEmitter = require(‘events’).EventEmitter;
</code></pre><p>1.实例化一个EventEmitter对象</p>
<pre><code>var event = new EventEmitter();
</code></pre><p>2.注册事件</p>
<pre><code>emitter.on( ‘Event_Name’ , callBack_Fun )
emitter.once( ‘Event_Name’ , callBack_Fun )    //注册一个单次监听器,触发一次后立刻解除
</code></pre><p>3.发射事件</p>
<pre><code>event.emit(‘Event_Name’ , 参数1,参数2);
</code></pre><p>4.移除事件</p>
<pre><code>emitter…removeListener(‘Event_Name’ , callBack_Fun)
emitter.removeAllListeners(  [‘Event_Name’] )    //如果指定了事件名,就移除指定的,否则移除所有事件
</code></pre><h3 id="模块和包"><a href="#模块和包" class="headerlink" title="模块和包"></a>模块和包</h3><p>Node.js 的模块和包机制的实现参照了 CommonJS 的标准，但并未完全遵循。</p>
<pre><code>#### 包
包是在模块基础上更深一步的抽象, 类似于 c/c++ 的函数库.
Node.js 包是一个目录. 其中包含一个JSON格式的说明文件 package.json
CommonJS 规范特征:
-&gt;   package.json 必须在包的顶层目录下
-&gt;   二进制文件在bin目录下
-&gt;   JavaScript代码在lib目录下
-&gt;   文档应该在doc目录下
-&gt;   单元测试在test目录下



#### require(&apos;Modile_Name&apos;)     
功能:    加载其他模块
说明:    不会重复加载以加载的模块


#### exports.setName
功能:    公开一个模块中的函数或对象
说明:    exports 本身仅仅是一个普通的空对象，即 {}. 所以 exports.函数      就是给它加了函数
module.exports  则是用一个对象取代 exports  对象. (不可以对     exports 直接赋值替代此功能)


方式1:
//使用
exports.SayName = function(thyName) {console.log(thyName)}; 
//调用
var test = require(&apos;./fileName&apos;);
test.SayName(&apos;XueYou&apos;);

方式2:
    //使用
    function hello(){
     var name;
    this.setNam(){};
    this.SayName(){};
    }
    module.exports = hello;
    //调用
    var test = require(&apos;./fileName&apos;);
    test = new test();    //注意因为是对象,所以要new
    test.SayName();
</code></pre> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2021
        <i class="ri-heart-fill heart_icon"></i> 魏姣
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        Powered by <a href="https://hexo.io" target="_blank">Hexo</a>
        <span class="division">|</span>
        Theme - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="薇娇"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>
<script src="/dist/main.js"></script>
<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->

<script src="/js/busuanzi-2.3.pure.min.js"></script>

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->

<link rel="stylesheet" href="/css/clipboard.css">
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>